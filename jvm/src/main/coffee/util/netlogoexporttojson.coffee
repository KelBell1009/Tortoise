parse = require('csv-parse/lib/sync')

parseBool = (x) -> x.toLowerCase() is "true"

identity = (x) -> x

converterFromSchema = (schema) -> (key) ->
  schema[key] ? identity

attributeParser = {
  'PLOTS': {
    x: parseFloat
    y: parseFloat
    color: parseFloat
    'pen down?': parseBool
    'x min': parseFloat
    'x max': parseFloat
    'y min': parseFloat
    'y max': parseFloat
    'autoplot?': parseBool
    mode: parseInt
    interval: parseInt
    'legend open?': parseBool
    'number of pens': parseInt
  }
  'RANDOM STATE': {}
  'GLOBALS': {
    'min-pxcor': parseInt
    'max-pxcor': parseInt
    'min-pycor': parseInt
    'max-pycor': parseInt
    perspective: parseInt
    nextIndex: parseInt
    ticks: parseInt
  }
  'TURTLES': {
    who: parseInt
    color: parseFloat
    heading: parseInt
    xcor: parseInt
    ycor: parseInt
    'label-color': parseFloat
    'hidden?': parseBool
    size: parseFloat
    'pen-size': parseFloat
    score: parseInt
}
  'PATCHES': {
    pxcor: parseInt
    pycor: parseInt
    pcolor: parseInt
    'plabel-color': parseFloat
  }
  'LINKS': {
    color: parseFloat
    'label-color': parseFloat
    'hidden?': parseBool
    thickness: parseFloat
  }
  'OUTPUT': {}
  'EXTENSIONS': {}
}

builtInGlobals = ['min-pxcor','max-pxcor','min-pycor','max-pycor','perspective','subject','nextIndex','directed-links','ticks']


oneOutput = (csvBucket, schema) ->
  if csvBucket.length == 0 then '' else csvBucket[0][0]

standardParse = (csvBucket, schema) ->
  output = []
  converter = converterFromSchema(schema)
  csvBucket.slice(1).forEach((x) ->
    obj = {}
    for j in [0...csvBucket[0].length]
      obj[csvBucket[0][j]] = converter(csvBucket[0][j])(x[j])
    output.push(obj))
  output

globalParse = (csvBucket, schema) ->
  standardParse(csvBucket, schema)[0]

plotParse = (csvBucket, schema) ->
  output = {}
  converter = converterFromSchema(schema)

  output['plots'] = []
  output['default'] = if csvBucket.length == 0 then null else csvBucket[0][0]

  #Iterate over every plot
  csvIndex = 1
  while csvIndex < csvBucket.length
    plot = {}
    plot['name'] = csvBucket[csvIndex][0]
    csvIndex++

    #Parsing of the global attributes in each plot
    for plotAttributeIndex in [0...csvBucket[csvIndex].length]
      plot[csvBucket[csvIndex][plotAttributeIndex]] = converter(csvBucket[csvIndex][plotAttributeIndex])(csvBucket[csvIndex + 1][plotAttributeIndex])
    csvIndex += 2

    #Parsing of the attributes of each pen in a plot
    plot['pens'] = []
    numPens = parseInt(plot['number of pens'])
    for penIndex in [0...numPens]
      pen = {}
      for penAttributeIndex in [0...csvBucket[csvIndex].length]
        pen[csvBucket[csvIndex][penAttributeIndex]] = converter(csvBucket[csvIndex][penAttributeIndex])(csvBucket[csvIndex + penIndex + 1][penAttributeIndex])
      pen['points'] = []
      plot['pens'].push(pen)
    csvIndex += 2 + numPens

    #For each pen, parsing of the list of points associated with the pen
    pointsIndex = 1
    while csvIndex + pointsIndex < csvBucket.length and csvBucket[csvIndex + pointsIndex].length != 1
      for penIndex in [0...numPens]
        point = {}
        length = csvBucket[csvIndex].length / numPens
        for pointAttributeIndex in [0...length]
          point[csvBucket[csvIndex][pointAttributeIndex]] = converter(csvBucket[csvIndex][pointAttributeIndex])(csvBucket[csvIndex + pointsIndex][length * penIndex + pointAttributeIndex])
        plot['pens'][penIndex]['points'].push(point)
      pointsIndex++
    csvIndex += pointsIndex

    output['plots'].push(plot)
  output

extensionParse = (csvBucket, schema) ->
  output = {}
  extension = ''
  for entry in csvBucket
    item = entry[0]
    if !item.startsWith('{{')
      extension = item
      output[extension] = []
    else
      output[extension].push(item)
  output

extractGlobals = (globals) ->
  builtIn = {}
  user = {}
  for global of globals
    if global in builtInGlobals
      builtIn[global] = globals[global]
    else
      user[global] = globals[global]
  [builtIn, user]

buckets = {
  'RANDOM STATE': oneOutput
  'GLOBALS': globalParse
  'TURTLES': standardParse
  'PATCHES': standardParse
  'LINKS': standardParse
  'OUTPUT': oneOutput
  'PLOTS': plotParse
  'EXTENSIONS': extensionParse
}

module.exports = () ->
  world = {}
  csv = testCSV
  f = (parsedCSV) ->
    dic = {}
    key = ''
    parsedCSV.forEach((x) ->
      if x of buckets
        key = x
        dic[key] = []
      else if key != ''
          dic[key].push(x))
    for bucket of buckets
      world[bucket] = buckets[bucket](dic[bucket], attributeParser[bucket])
    globals = extractGlobals(world["GLOBALS"])
    world["USER GLOBALS"] = globals[1]
    world["BUILT-IN GLOBALS"] = globals[0]
    delete world["GLOBALS"]
  parsedCSV = parse(csv, {
    comment: '#'
    skip_empty_lines: true
    relax_column_count: true
  })
  f(parsedCSV)
  world

testCSV = '''
"export-world data (NetLogo 6.0)"
"PD Two Person Iterated.nlogo"
"01/19/2017 14:17:09:074 -0600"

"RANDOM STATE"
"0 0 -1727483681 503 0.0 false 441240339 666054761 -986763179 1350427196 1905313668 -878174930 758740051 -953645898 -939590750 -1680732897 -1588229354 -1497021261 840321660 -2074834439 -365285023 2122729559 784474892 523249468 -631575945 -164775874 -1470860272 642481691 -773750680 1758019626 -778440629 -697781321 281305882 -104511471 -1293201715 1024084240 -1476261964 1859270802 476013225 -1123755610 1463704429 -1387286990 217918012 -677946362 -1654125951 1653211306 -1719074724 510101708 -297459345 -1219972654 1849619595 387962171 -1615720675 -1888312778 226320794 1578703126 -1445945714 -1166537713 744522735 -1964828769 -1892089296 -2078532205 -470930167 -455689758 -1615576295 1374597908 -1647801812 -1769710231 -412115022 1472762349 -84126029 219900110 -688495861 331079511 589432453 918315971 671987081 2085015473 526631638 1792664563 408484674 471337557 -282254791 1879877018 1176363769 -1646625576 946828816 -1711022287 -2091570092 -810481828 2046194145 1673978911 -2056750444 -397680454 441405247 -722844658 -382305355 1798007500 -1639156097 -896719128 -170188199 547217550 1177927068 1321043428 1389556312 1600615926 -1421123350 2035935360 -754444139 846412859 118795799 78728520 -1550451643 -1979306179 -788060895 -452590220 781560673 -2083301155 -910856001 1551942080 1337287457 91555426 1948390581 746999496 -1064510421 1323132425 681929949 -1052917878 2032611993 622510111 -522915794 1378137015 1254076816 -1259123056 746007239 1852865425 -536742435 2093799436 651021367 -1039526353 -475306748 -1512309865 204993269 -844140954 -895179273 -800085805 945918557 -474578789 -511373762 367308741 114943541 1992035107 740521323 1034701673 380932179 2132554807 -1944008597 650679700 363438102 -1967824985 -475708908 -1097557103 672974897 962381222 1360258525 -1202085660 425335907 587902082 -196556984 1912249817 -1937039706 1358460869 1463154070 1764141139 -1813346157 408756145 -1877171283 1298605900 1812495916 -637336588 2033283268 1616062429 177746993 -698120291 -2116895802 -236461013 830339079 -338011026 911641713 379689813 552971750 -240592919 -1148320056 604546561 480011123 -1917229814 -1642954956 659931427 -1240774420 83556146 1179392427 -570938295 684839893 -1656791106 1858500655 -2009653161 139706414 1009854493 -2100763683 1118890821 -376409205 -1818653929 -1838948926 -1523184072 -935636606 1660360976 1853194487 -1496146524 992679875 1771847533 476380928 1326112348 -1686031001 -1123145484 1631832052 1841108195 -1314470167 1102182306 1751028758 -1134652865 -886244946 -392558029 -932109788 -153885057 -1566538841 1591776080 1264166420 930550309 1553062920 -1687995928 20722215 627950126 80028917 766947291 -1267362057 36901680 -621691787 -1718900869 1234939705 -2040438207 -1776032009 817677790 798593423 970387291 11424904 1758596249 -1843587331 -689899027 1259644820 -1090819240 1138697150 -350469160 -469687125 935990988 2026165125 1814881433 -1061538260 -881210603 -1844860885 -444948915 1949309939 -1849690986 -1723222714 -1848682247 -1227129204 -2105979982 -867886124 -1683956567 -1809603395 453054874 -1967781950 1684403881 1646243402 546731736 -461539607 123211941 -2083689234 -800284275 1966708981 -2139912401 -1702790074 1280442268 2121629136 868157029 590725128 -1246962594 -1289845984 -1158984798 -418390029 -276599370 989554048 -1975435965 -97424880 -30557890 2022116833 1056815344 1294708660 -1408329775 -2055918567 126868482 -39767607 -728019295 -2572046 -1046494324 645169383 -1796141956 2092412896 482107559 531263821 174152418 -1477943518 1276983236 905933201 -1450563599 -1950904629 -393155262 -297365620 420754858 -1946496852 1388705007 -1550988889 1128125559 -2073728032 1366823435 -110524091 655499188 -1012366428 1044048625 1522851380 -1423871786 1836910499 -992215444 1888947874 -949695427 900188762 -210250275 1887352519 -1141300411 -1504068657 1168851987 358949397 361175263 1064072699 -710970563 38559089 -469896237 687641140 -1809312404 796172389 -263980942 1146130194 699291044 -993462641 -2049578834 1146500809 -746348462 170954635 1744707637 -941602780 -106516856 544556732 -1473725508 -608078638 2138660581 232322801 -1689536637 2063075165 -2124220530 213415013 -1308903489 372895148 -233483186 -1632049085 -1292129441 937175392 626032916 -860342009 -1439046320 78727645 1555746411 3978579 -1271546699 281490639 1374465544 -2139178076 -659996600 146672642 1620530177 -311833338 2058882119 390139099 1565931721 1337426492 -861358418 -584027547 -106632325 -2020022660 2050893749 -1212942085 -117756230 211781137 224537893 -568126719 -1722709048 596566832 -276865455 1015205966 -953528837 371220363 -1416589656 -1868089231 1966008837 -419637892 1546247325 1703142228 -970066036 699224407 -182202070 1212045183 -1077835143 -908280257 852689018 688875478 51848898 -83400299 1855607157 -1967766273 998664362 -658795727 -2046164971 1919464096 423752311 2006701583 786646342 1825374768 -883056420 -2085431629 313350210 -52616860 -1800465562 26480744 1523800506 2069294267 -657892844 625108829 -587508249 840393959 289657475 -210975684 -1351096243 -1878479135 1326821417 -89519274 461639689 -1429799508 -283376559 223378163 -1337043179 -1240969575 -1836722552 1376970033 791653317 775391789 1987493799 2102658818 1943521104 -763233049 -2043901795 -391208670 -1534848194 9004637 -174297036 -2098708002 -367068751 -749460621 1623091410 -1295685351 2091748904 -1152036113 -1551723029 -1487763167 -1841181538 -579442431 -862709029 1635358381 -44898280 -625018230 -1393568022 -1417761199 219353269 -449221230 410637746 1498815285 2088487784 1470334 1458756955 389004208 -669966032 -1727909972 2123350964 -598795376 -1241070142 -981103883 1275089287 -1031162382 1980471023 1048202417 -674521850 -1333467162 1984146122 -154474734 -1518169045 -1265949313 -1478461656 646277974 499142500 1497733125 1534648198 -33827784 1663593712 -110306646 145558065 361402938 -783229433 -2060749178 143892680 84486464 -118741027 56494637 1369105745 339776271 -743424169 2033994193 3067276 698025723 -901567261 389002932 -787050176 1303810984 1263420544 -1891571319 1869333140 37221739 -1774430711 1181421427 -1603958500 1953803481 1161263873 -605429895 1010721539 -1321470734 -2087889860 2081309077 -1327972333 498499852 -774657168 -2086085084 -135857607 -2071110708 2024208280 1556161054 -846864869 2051204211 -674081157 1048322225 665547734 423866176 343695816 -2015648689 -1265687848 -1783053666 1131058555 726831995 -1828875987 1868220439 553821875 726764120 -792530253 456069928 1381613890 -105786376 -1645266884 -1583976547 -1270499625 -146420673 514335110 -1077526194 445437690 -964162718 1525391228 1977683092 2124317099 -714721209 1656592930 793992215 749882799 -1367074002 848708302 -439861820 -266608570 -1657260155 -1849440164 -932482926 -686271670 1148307619 1818710319 79718056 1111413487 396854836 324129414 -1621525172 305204854 -759236288 1075764928 -2045941766 -275656852 -1180597003 -558012287 1253045162 -1684449430"

"GLOBALS"
"min-pxcor","max-pxcor","min-pycor","max-pycor","perspective","subject","nextIndex","directed-links","ticks","computer-score","computer-strategy","display-history?","hidden-strategy","human-score","human-strategy","select-computer-strategy?"
"-17","17","-8","8","0","nobody","2","""NEITHER""","56","61","""tit-for-tat""","false","5","66","""random""","true"

"TURTLES"
"who","color","heading","xcor","ycor","shape","label","label-color","breed","hidden?","size","pen-size","pen-mode","score","defect-now?","partner","partner-defected?","partner-defected-past?"
"0","65","90","8.5","0","""computer""","1.109","9.9","{breed computers}","false","10","1","""up""","61","true","1","true","true"
"1","125","270","-8.5","0","""person""","1.2","9.9","{breed users}","false","10","1","""up""","66","true","0","true","true"

"PATCHES"
"pxcor","pycor","pcolor","plabel","plabel-color"
"-17","8","0","""""","9.9"
"-16","8","0","""""","9.9"
"-15","8","0","""""","9.9"
"-14","8","0","""""","9.9"
"-13","8","0","""""","9.9"
"-12","8","0","""""","9.9"
"-11","8","0","""""","9.9"
"-10","8","0","""""","9.9"
"-9","8","0","""""","9.9"
"-8","8","0","""""","9.9"
"-7","8","0","""""","9.9"
"-6","8","0","""""","9.9"
"-5","8","0","""""","9.9"
"-4","8","0","""""","9.9"
"-3","8","0","""""","9.9"
"-2","8","0","""""","9.9"
"-1","8","0","""""","9.9"
"0","8","0","""""","9.9"
"1","8","0","""""","9.9"
"2","8","0","""""","9.9"
"3","8","0","""""","9.9"
"4","8","5","""""","9.9"
"5","8","0","""""","9.9"
"6","8","0","""""","9.9"
"7","8","0","""""","9.9"
"8","8","0","""""","9.9"
"9","8","0","""""","9.9"
"10","8","0","""""","9.9"
"11","8","0","""""","9.9"
"12","8","0","""""","9.9"
"13","8","0","""""","9.9"
"14","8","0","""""","9.9"
"15","8","0","""""","9.9"
"16","8","0","""""","9.9"
"17","8","0","""""","9.9"
"-17","7","0","""""","9.9"
"-16","7","0","""""","9.9"
"-15","7","0","""""","9.9"
"-14","7","0","""""","9.9"
"-13","7","0","""""","9.9"
"-12","7","0","""""","9.9"
"-11","7","0","""""","9.9"
"-10","7","0","""""","9.9"
"-9","7","0","""""","9.9"
"-8","7","0","""""","9.9"
"-7","7","0","""""","9.9"
"-6","7","0","""""","9.9"
"-5","7","0","""""","9.9"
"-4","7","0","""""","9.9"
"-3","7","0","""""","9.9"
"-2","7","0","""""","9.9"
"-1","7","0","""""","9.9"
"0","7","0","""""","9.9"
"1","7","0","""""","9.9"
"2","7","0","""""","9.9"
"3","7","0","""""","9.9"
"4","7","0","""""","9.9"
"5","7","0","""""","9.9"
"6","7","0","""""","9.9"
"7","7","0","""""","9.9"
"8","7","0","""""","9.9"
"9","7","0","""""","9.9"
"10","7","0","""""","9.9"
"11","7","0","""""","9.9"
"12","7","0","""""","9.9"
"13","7","0","""""","9.9"
"14","7","0","""""","9.9"
"15","7","0","""""","9.9"
"16","7","0","""""","9.9"
"17","7","0","""""","9.9"
"-17","6","0","""""","9.9"
"-16","6","0","""""","9.9"
"-15","6","0","""""","9.9"
"-14","6","0","""""","9.9"
"-13","6","0","""""","9.9"
"-12","6","0","""""","9.9"
"-11","6","0","""""","9.9"
"-10","6","0","""""","9.9"
"-9","6","0","""""","9.9"
"-8","6","0","""""","9.9"
"-7","6","0","""""","9.9"
"-6","6","0","""""","9.9"
"-5","6","0","""""","9.9"
"-4","6","0","""""","9.9"
"-3","6","0","""""","9.9"
"-2","6","0","""""","9.9"
"-1","6","0","""""","9.9"
"0","6","0","""""","9.9"
"1","6","0","""""","9.9"
"2","6","0","""""","9.9"
"3","6","0","""""","9.9"
"4","6","0","""""","9.9"
"5","6","0","""""","9.9"
"6","6","0","""""","9.9"
"7","6","0","""""","9.9"
"8","6","0","""""","9.9"
"9","6","0","""""","9.9"
"10","6","0","""""","9.9"
"11","6","0","""""","9.9"
"12","6","0","""""","9.9"
"13","6","0","""""","9.9"
"14","6","0","""""","9.9"
"15","6","0","""""","9.9"
"16","6","0","""""","9.9"
"17","6","0","""""","9.9"
"-17","5","0","""""","9.9"
"-16","5","0","""""","9.9"
"-15","5","0","""""","9.9"
"-14","5","0","""""","9.9"
"-13","5","0","""""","9.9"
"-12","5","0","""""","9.9"
"-11","5","0","""""","9.9"
"-10","5","0","""""","9.9"
"-9","5","0","""""","9.9"
"-8","5","0","""""","9.9"
"-7","5","0","""""","9.9"
"-6","5","0","""""","9.9"
"-5","5","0","""""","9.9"
"-4","5","0","""""","9.9"
"-3","5","0","""""","9.9"
"-2","5","0","""""","9.9"
"-1","5","0","""""","9.9"
"0","5","0","""""","9.9"
"1","5","0","""""","9.9"
"2","5","0","""""","9.9"
"3","5","0","""""","9.9"
"4","5","0","""""","9.9"
"5","5","0","""""","9.9"
"6","5","0","""""","9.9"
"7","5","0","""""","9.9"
"8","5","0","""""","9.9"
"9","5","0","""""","9.9"
"10","5","0","""""","9.9"
"11","5","0","""""","9.9"
"12","5","0","""""","9.9"
"13","5","0","""""","9.9"
"14","5","0","""""","9.9"
"15","5","0","""""","9.9"
"16","5","0","""""","9.9"
"17","5","0","""""","9.9"
"-17","4","0","""""","9.9"
"-16","4","0","""""","9.9"
"-15","4","0","""""","9.9"
"-14","4","0","""""","9.9"
"-13","4","0","""""","9.9"
"-12","4","0","""""","9.9"
"-11","4","0","""""","9.9"
"-10","4","0","""""","9.9"
"-9","4","0","""""","9.9"
"-8","4","0","""""","9.9"
"-7","4","0","""""","9.9"
"-6","4","0","""""","9.9"
"-5","4","0","""""","9.9"
"-4","4","0","""""","9.9"
"-3","4","0","""""","9.9"
"-2","4","0","""""","9.9"
"-1","4","0","""""","9.9"
"0","4","0","""""","9.9"
"1","4","0","""""","9.9"
"2","4","0","""""","9.9"
"3","4","0","""""","9.9"
"4","4","0","""""","9.9"
"5","4","0","""""","9.9"
"6","4","0","""""","9.9"
"7","4","0","""""","9.9"
"8","4","0","""""","9.9"
"9","4","0","""""","9.9"
"10","4","0","""""","9.9"
"11","4","0","""""","9.9"
"12","4","0","""""","9.9"
"13","4","0","""""","9.9"
"14","4","0","""""","9.9"
"15","4","0","""""","9.9"
"16","4","0","""""","9.9"
"17","4","0","""""","9.9"
"-17","3","0","""""","9.9"
"-16","3","0","""""","9.9"
"-15","3","0","""""","9.9"
"-14","3","0","""""","9.9"
"-13","3","0","""""","9.9"
"-12","3","0","""""","9.9"
"-11","3","0","""""","9.9"
"-10","3","0","""""","9.9"
"-9","3","0","""""","9.9"
"-8","3","0","""""","9.9"
"-7","3","0","""""","9.9"
"-6","3","0","""""","9.9"
"-5","3","0","""""","9.9"
"-4","3","0","""""","9.9"
"-3","3","0","""""","9.9"
"-2","3","0","""""","9.9"
"-1","3","0","""""","9.9"
"0","3","0","""""","9.9"
"1","3","0","""""","9.9"
"2","3","0","""""","9.9"
"3","3","0","""""","9.9"
"4","3","0","""""","9.9"
"5","3","0","""""","9.9"
"6","3","0","""""","9.9"
"7","3","0","""""","9.9"
"8","3","0","""""","9.9"
"9","3","0","""""","9.9"
"10","3","0","""""","9.9"
"11","3","0","""""","9.9"
"12","3","0","""""","9.9"
"13","3","0","""""","9.9"
"14","3","0","""""","9.9"
"15","3","0","""""","9.9"
"16","3","0","""""","9.9"
"17","3","0","""""","9.9"
"-17","2","0","""""","9.9"
"-16","2","0","""""","9.9"
"-15","2","0","""""","9.9"
"-14","2","0","""""","9.9"
"-13","2","0","""""","9.9"
"-12","2","0","""""","9.9"
"-11","2","0","""""","9.9"
"-10","2","0","""""","9.9"
"-9","2","0","""""","9.9"
"-8","2","0","""""","9.9"
"-7","2","0","""""","9.9"
"-6","2","0","""""","9.9"
"-5","2","0","""""","9.9"
"-4","2","0","""""","9.9"
"-3","2","0","""""","9.9"
"-2","2","0","""""","9.9"
"-1","2","0","""""","9.9"
"0","2","0","""""","9.9"
"1","2","0","""""","9.9"
"2","2","0","""""","9.9"
"3","2","0","""""","9.9"
"4","2","0","""""","9.9"
"5","2","0","""""","9.9"
"6","2","0","""""","9.9"
"7","2","0","""""","9.9"
"8","2","0","""""","9.9"
"9","2","0","""""","9.9"
"10","2","0","""""","9.9"
"11","2","0","""""","9.9"
"12","2","0","""""","9.9"
"13","2","0","""""","9.9"
"14","2","0","""""","9.9"
"15","2","0","""""","9.9"
"16","2","0","""""","9.9"
"17","2","0","""""","9.9"
"-17","1","0","""""","9.9"
"-16","1","0","""""","9.9"
"-15","1","0","""""","9.9"
"-14","1","0","""""","9.9"
"-13","1","0","""""","9.9"
"-12","1","0","""""","9.9"
"-11","1","0","""""","9.9"
"-10","1","0","""""","9.9"
"-9","1","0","""""","9.9"
"-8","1","0","""""","9.9"
"-7","1","0","""""","9.9"
"-6","1","0","""""","9.9"
"-5","1","0","""""","9.9"
"-4","1","0","""""","9.9"
"-3","1","0","""""","9.9"
"-2","1","0","""""","9.9"
"-1","1","0","""""","9.9"
"0","1","0","""""","9.9"
"1","1","0","""""","9.9"
"2","1","0","""""","9.9"
"3","1","0","""""","9.9"
"4","1","0","""""","9.9"
"5","1","0","""""","9.9"
"6","1","0","""""","9.9"
"7","1","0","""""","9.9"
"8","1","0","""""","9.9"
"9","1","0","""""","9.9"
"10","1","0","""""","9.9"
"11","1","0","""""","9.9"
"12","1","0","""""","9.9"
"13","1","0","""""","9.9"
"14","1","0","""""","9.9"
"15","1","0","""""","9.9"
"16","1","0","""""","9.9"
"17","1","0","""""","9.9"
"-17","0","0","""""","9.9"
"-16","0","0","""""","9.9"
"-15","0","0","""""","9.9"
"-14","0","0","""""","9.9"
"-13","0","0","""""","9.9"
"-12","0","0","""""","9.9"
"-11","0","0","""""","9.9"
"-10","0","0","""""","9.9"
"-9","0","0","""""","9.9"
"-8","0","0","""""","9.9"
"-7","0","0","""""","9.9"
"-6","0","0","""""","9.9"
"-5","0","0","""""","9.9"
"-4","0","0","""""","9.9"
"-3","0","0","""""","9.9"
"-2","0","0","""""","9.9"
"-1","0","0","""""","9.9"
"0","0","0","""""","9.9"
"1","0","0","""""","9.9"
"2","0","0","""""","9.9"
"3","0","0","""""","9.9"
"4","0","0","""""","9.9"
"5","0","0","""""","9.9"
"6","0","0","""""","9.9"
"7","0","0","""""","9.9"
"8","0","0","""""","9.9"
"9","0","0","""""","9.9"
"10","0","0","""""","9.9"
"11","0","0","""""","9.9"
"12","0","0","""""","9.9"
"13","0","0","""""","9.9"
"14","0","0","""""","9.9"
"15","0","0","""""","9.9"
"16","0","0","""""","9.9"
"17","0","0","""""","9.9"
"-17","-1","0","""""","9.9"
"-16","-1","0","""""","9.9"
"-15","-1","0","""""","9.9"
"-14","-1","0","""""","9.9"
"-13","-1","0","""""","9.9"
"-12","-1","0","""""","9.9"
"-11","-1","0","""""","9.9"
"-10","-1","0","""""","9.9"
"-9","-1","0","""""","9.9"
"-8","-1","0","""""","9.9"
"-7","-1","0","""""","9.9"
"-6","-1","0","""""","9.9"
"-5","-1","0","""""","9.9"
"-4","-1","0","""""","9.9"
"-3","-1","0","""""","9.9"
"-2","-1","0","""""","9.9"
"-1","-1","0","""""","9.9"
"0","-1","0","""""","9.9"
"1","-1","0","""""","9.9"
"2","-1","0","""""","9.9"
"3","-1","0","""""","9.9"
"4","-1","0","""""","9.9"
"5","-1","0","""""","9.9"
"6","-1","0","""""","9.9"
"7","-1","0","""""","9.9"
"8","-1","0","""""","9.9"
"9","-1","0","""""","9.9"
"10","-1","0","""""","9.9"
"11","-1","0","""""","9.9"
"12","-1","0","""""","9.9"
"13","-1","0","""""","9.9"
"14","-1","0","""""","9.9"
"15","-1","0","""""","9.9"
"16","-1","0","""""","9.9"
"17","-1","0","""""","9.9"
"-17","-2","0","""""","9.9"
"-16","-2","0","""""","9.9"
"-15","-2","0","""""","9.9"
"-14","-2","0","""""","9.9"
"-13","-2","0","""""","9.9"
"-12","-2","0","""""","9.9"
"-11","-2","0","""""","9.9"
"-10","-2","0","""""","9.9"
"-9","-2","0","""""","9.9"
"-8","-2","0","""""","9.9"
"-7","-2","0","""""","9.9"
"-6","-2","0","""""","9.9"
"-5","-2","0","""""","9.9"
"-4","-2","0","""""","9.9"
"-3","-2","0","""""","9.9"
"-2","-2","0","""""","9.9"
"-1","-2","0","""""","9.9"
"0","-2","0","""""","9.9"
"1","-2","0","""""","9.9"
"2","-2","0","""""","9.9"
"3","-2","0","""""","9.9"
"4","-2","0","""""","9.9"
"5","-2","0","""""","9.9"
"6","-2","0","""""","9.9"
"7","-2","0","""""","9.9"
"8","-2","0","""""","9.9"
"9","-2","0","""""","9.9"
"10","-2","0","""""","9.9"
"11","-2","0","""""","9.9"
"12","-2","0","""""","9.9"
"13","-2","0","""""","9.9"
"14","-2","0","""""","9.9"
"15","-2","0","""""","9.9"
"16","-2","0","""""","9.9"
"17","-2","0","""""","9.9"
"-17","-3","0","""""","9.9"
"-16","-3","0","""""","9.9"
"-15","-3","0","""""","9.9"
"-14","-3","0","""""","9.9"
"-13","-3","0","""""","9.9"
"-12","-3","0","""""","9.9"
"-11","-3","0","""""","9.9"
"-10","-3","0","""""","9.9"
"-9","-3","0","""""","9.9"
"-8","-3","0","""""","9.9"
"-7","-3","0","""""","9.9"
"-6","-3","0","""""","9.9"
"-5","-3","0","""""","9.9"
"-4","-3","0","""""","9.9"
"-3","-3","0","""""","9.9"
"-2","-3","0","""""","9.9"
"-1","-3","0","""""","9.9"
"0","-3","0","""""","9.9"
"1","-3","0","""""","9.9"
"2","-3","0","""""","9.9"
"3","-3","0","""""","9.9"
"4","-3","0","""""","9.9"
"5","-3","0","""""","9.9"
"6","-3","0","""""","9.9"
"7","-3","0","""""","9.9"
"8","-3","0","""""","9.9"
"9","-3","0","""""","9.9"
"10","-3","0","""""","9.9"
"11","-3","0","""""","9.9"
"12","-3","0","""""","9.9"
"13","-3","0","""""","9.9"
"14","-3","0","""""","9.9"
"15","-3","0","""""","9.9"
"16","-3","0","""""","9.9"
"17","-3","0","""""","9.9"
"-17","-4","0","""""","9.9"
"-16","-4","0","""""","9.9"
"-15","-4","0","""""","9.9"
"-14","-4","0","""""","9.9"
"-13","-4","0","""""","9.9"
"-12","-4","0","""""","9.9"
"-11","-4","0","""""","9.9"
"-10","-4","0","""""","9.9"
"-9","-4","0","""""","9.9"
"-8","-4","0","""""","9.9"
"-7","-4","0","""""","9.9"
"-6","-4","0","""""","9.9"
"-5","-4","0","""""","9.9"
"-4","-4","0","""""","9.9"
"-3","-4","0","""""","9.9"
"-2","-4","0","""""","9.9"
"-1","-4","0","""""","9.9"
"0","-4","0","""""","9.9"
"1","-4","0","""""","9.9"
"2","-4","0","""""","9.9"
"3","-4","0","""""","9.9"
"4","-4","0","""""","9.9"
"5","-4","0","""""","9.9"
"6","-4","0","""""","9.9"
"7","-4","0","""""","9.9"
"8","-4","0","""""","9.9"
"9","-4","0","""""","9.9"
"10","-4","0","""""","9.9"
"11","-4","0","""""","9.9"
"12","-4","0","""""","9.9"
"13","-4","0","""""","9.9"
"14","-4","0","""""","9.9"
"15","-4","0","""""","9.9"
"16","-4","0","""""","9.9"
"17","-4","0","""""","9.9"
"-17","-5","0","""""","9.9"
"-16","-5","0","""""","9.9"
"-15","-5","0","""""","9.9"
"-14","-5","0","""""","9.9"
"-13","-5","0","""""","9.9"
"-12","-5","0","""""","9.9"
"-11","-5","0","""""","9.9"
"-10","-5","0","""""","9.9"
"-9","-5","0","""""","9.9"
"-8","-5","0","""""","9.9"
"-7","-5","0","""""","9.9"
"-6","-5","0","""""","9.9"
"-5","-5","0","""""","9.9"
"-4","-5","0","""""","9.9"
"-3","-5","0","""""","9.9"
"-2","-5","0","""""","9.9"
"-1","-5","0","""""","9.9"
"0","-5","0","""""","9.9"
"1","-5","0","""""","9.9"
"2","-5","0","""""","9.9"
"3","-5","0","""""","9.9"
"4","-5","0","""""","9.9"
"5","-5","0","""""","9.9"
"6","-5","0","""""","9.9"
"7","-5","0","""""","9.9"
"8","-5","0","""""","9.9"
"9","-5","0","""""","9.9"
"10","-5","0","""""","9.9"
"11","-5","0","""""","9.9"
"12","-5","0","""""","9.9"
"13","-5","0","""""","9.9"
"14","-5","0","""""","9.9"
"15","-5","0","""""","9.9"
"16","-5","0","""""","9.9"
"17","-5","0","""""","9.9"
"-17","-6","0","""""","9.9"
"-16","-6","0","""""","9.9"
"-15","-6","0","""""","9.9"
"-14","-6","0","""""","9.9"
"-13","-6","0","""""","9.9"
"-12","-6","0","""""","9.9"
"-11","-6","0","""""","9.9"
"-10","-6","0","""""","9.9"
"-9","-6","0","""""","9.9"
"-8","-6","0","""""","9.9"
"-7","-6","0","""""","9.9"
"-6","-6","0","""""","9.9"
"-5","-6","0","""""","9.9"
"-4","-6","0","""""","9.9"
"-3","-6","0","""""","9.9"
"-2","-6","0","""""","9.9"
"-1","-6","0","""""","9.9"
"0","-6","0","""""","9.9"
"1","-6","0","""""","9.9"
"2","-6","0","""""","9.9"
"3","-6","0","""""","9.9"
"4","-6","0","""""","9.9"
"5","-6","0","""""","9.9"
"6","-6","0","""""","9.9"
"7","-6","0","""""","9.9"
"8","-6","0","""""","9.9"
"9","-6","0","""""","9.9"
"10","-6","0","""""","9.9"
"11","-6","0","""""","9.9"
"12","-6","0","""""","9.9"
"13","-6","0","""""","9.9"
"14","-6","0","""""","9.9"
"15","-6","0","""""","9.9"
"16","-6","0","""""","9.9"
"17","-6","0","""""","9.9"
"-17","-7","0","""""","9.9"
"-16","-7","0","""""","9.9"
"-15","-7","0","""""","9.9"
"-14","-7","0","""""","9.9"
"-13","-7","0","""""","9.9"
"-12","-7","0","""""","9.9"
"-11","-7","0","""""","9.9"
"-10","-7","0","""""","9.9"
"-9","-7","0","""""","9.9"
"-8","-7","0","""""","9.9"
"-7","-7","0","""""","9.9"
"-6","-7","0","""""","9.9"
"-5","-7","0","""""","9.9"
"-4","-7","0","""""","9.9"
"-3","-7","0","""""","9.9"
"-2","-7","0","""""","9.9"
"-1","-7","0","""""","9.9"
"0","-7","0","""""","9.9"
"1","-7","0","""""","9.9"
"2","-7","0","""""","9.9"
"3","-7","0","""""","9.9"
"4","-7","0","""""","9.9"
"5","-7","0","""""","9.9"
"6","-7","0","""""","9.9"
"7","-7","0","""""","9.9"
"8","-7","0","""""","9.9"
"9","-7","0","""""","9.9"
"10","-7","0","""""","9.9"
"11","-7","0","""""","9.9"
"12","-7","0","""""","9.9"
"13","-7","0","""""","9.9"
"14","-7","0","""""","9.9"
"15","-7","0","""""","9.9"
"16","-7","0","""""","9.9"
"17","-7","0","""""","9.9"
"-17","-8","0","""""","9.9"
"-16","-8","0","""""","9.9"
"-15","-8","0","""""","9.9"
"-14","-8","0","""""","9.9"
"-13","-8","0","""""","9.9"
"-12","-8","0","""""","9.9"
"-11","-8","0","""""","9.9"
"-10","-8","0","""""","9.9"
"-9","-8","0","""""","9.9"
"-8","-8","0","""""","9.9"
"-7","-8","0","""""","9.9"
"-6","-8","0","""""","9.9"
"-5","-8","0","""""","9.9"
"-4","-8","0","""""","9.9"
"-3","-8","0","""""","9.9"
"-2","-8","0","""""","9.9"
"-1","-8","0","""""","9.9"
"0","-8","0","""""","9.9"
"1","-8","0","""""","9.9"
"2","-8","0","""""","9.9"
"3","-8","0","""""","9.9"
"4","-8","0","""""","9.9"
"5","-8","0","""""","9.9"
"6","-8","0","""""","9.9"
"7","-8","0","""""","9.9"
"8","-8","0","""""","9.9"
"9","-8","0","""""","9.9"
"10","-8","0","""""","9.9"
"11","-8","0","""""","9.9"
"12","-8","0","""""","9.9"
"13","-8","0","""""","9.9"
"14","-8","0","""""","9.9"
"15","-8","0","""""","9.9"
"16","-8","0","""""","9.9"
"17","-8","0","""""","9.9"

"LINKS"
"end1","end2","color","label","label-color","hidden?","breed","thickness","shape","tie-mode"


"OUTPUT"
"PLOTS"
"Derp"
"""Average Score"""
"x min","x max","y min","y max","autoplot?","current pen","legend open?","number of pens"
"0","58.8","0","5","true","""human""","false","3"

"pen name","pen down?","mode","interval","color","x"
"""human""","true","0","1","0","56"
"""computer""","true","0","1","105","56"
"""crappy-pen""","true","0","1","5","56"

"""human""",,,,"""computer""",,,,"""crappy-pen"""
"x","y","color","pen down?","x","y","color","pen down?","x","y","color","pen down?"
"0","3","0","true","0","3","105","true","0","0","5","true"
"1","3","0","true","1","3","105","true","1","0","5","true"
"2","5","0","true","2","0","105","true","2","0","5","true"

"""Derp"""
"x min","x max","y min","y max","autoplot?","current pen","legend open?","number of pens"
"0","58.8","0","10","true","""default""","false","1"

"pen name","pen down?","mode","interval","color","x"
"""default""","true","0","1","0","56"

"""default"""
"x","y","color","pen down?"
"0","2","0","true"

"EXTENSIONS"

'''
